# Aquarius32 TRM

## Memory map

| Address       |    Width | Description                  |
| ------------- | -------: | ---------------------------- |
| 00000 - 007FF | 8/16/32b | Boot ROM (2kB)               |
| 00800 - 01FFF |        - | -                            |
| 02000         |      32b | ESP CTRL                     |
| 02004         |      32b | ESP DATA                     |
| 02008         |      32b | VCTRL                        |
| 0200C         |      32b | VSCRX                        |
| 02010         |      32b | VSCRY                        |
| 02014         |      32b | VLINE                        |
| 02018         |      32b | VIRQLINE                     |
| 0201C         |      32b | KEYBUF                       |
| 02020 - 027FF |        - | -                            |
| 02800 - 02FFF |      32b | FM synthesizer               |
| 03000 - 031FF |      32b | Sprite attributes (64x2x32b) |
| 03200 - 03FFF |        - | -                            |
| 04000 - 0407F |      16b | Palette (4x16 entries)       |
| 04080 - 04FFF |        - | -                            |
| 05000 - 057FF |       8b | Character RAM (2kB)          |
| 05800 - 05FFF |        - | -                            |
| 06000 - 06FFF |    8/16b | Text RAM (4kB)               |
| 07000 - 07FFF |        - | -                            |
| 08000 - 0FFFF | 8/16/32b | VRAM (32kB)                  |
| 10000 - 1FFFF | 8/16/32b | VRAM 4bpp addressable (64kB) |
| 20000 - 7FFFF |        - | -                            |
| 80000 - FFFFF | 8/16/32b | RAM (512kB) (cached)         |

- TODO: Audio

## VCTRL

| 31:6 |   5    |            4             |   3    |       2       |       1        |    0    |
| :--: | :----: | :----------------------: | :----: | :-----------: | :------------: | :-----: |
|  -   | Spr_en | Gfx_mode: bm(0), tile(1) | Gfx_en | Text_priority | Text_80columns | Text_en |

## Sprite attributes

Even addresses:

| 31:25 | 24:16 | 15:8 | 7:0 |
| :---: | :---: | :--: | :-: |
|   -   |   Y   |  -   |  X  |

Odd addresses:

| 31:16 |    15    |  14:13  |   12   |   11   |    10     |       9:0        |
| :---: | :------: | :-----: | :----: | :----: | :-------: | :--------------: |
|   -   | Priority | Palette | V-flip | H-flip | Height:16 | Tile index (9:0) |

# Video RAM data

| Address   | Description                        |
| --------- | ---------------------------------- |
| 0000-7FFF | Tile data (overlaps with tile map) |
| 0000-7CFF | Bitmap data                        |
| 7000-7FFF | Tile map                           |

## Tile map

64x32 entries, each with the following format:

|    15    |  14:13  |   12   |   11   | 10  |       9:0        |
| :------: | :-----: | :----: | :----: | :-: | :--------------: |
| Priority | Palette | V-flip | H-flip |  -  | Tile index (9:0) |

## CPU

RISC-V
RAM cache
